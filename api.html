
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>inmembrane</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="css/bootstrap.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 20px;
        padding-bottom: 40px;
      }

      /* Custom container */
      .container-narrow {
        margin: 0 auto;
        max-width: 700px;
      }
      .container-narrow > hr {
        margin: 30px 0;
      }

      /* Main marketing message and sign up button */
      .jumbotron {
        margin: 60px 0;
        text-align: center;
      }
      .jumbotron h1 {
        font-size: 72px;
        line-height: 1;
      }
      .jumbotron .btn {
        font-size: 21px;
        padding: 14px 24px;
      }

      /* Supporting marketing content */
      .marketing {
        margin: 60px 0;
      }
      .marketing p + h4 {
        margin-top: 28px;
      }
    </style>
    <link href="css/bootstrap-responsive.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <link rel="shortcut icon" href="ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="ico/apple-touch-icon-57-precomposed.png">
  </head>

  <body>

    <div class="container-narrow">

      <div class="masthead">
        <ul class="nav nav-pills pull-right">
          <li><a href="index.html">Home</a></li>
          <li><a href="customization.html">Customization</a></li>
          <li class="active"><a href="#">API</a></li>
        </ul>
        <h3 class="muted">inmembrane</h3>
      </div>

      <hr>


      <div class="row-fluid marketing">
        <div class="span12">

          
<h1>Programming API</h1>
<p>The structure of <em>inmembrane</em> consists of 
</p>
<ul>
 <li>
     top-level wrapper to manage parameters
 </li>

 <li>
     protocol handler
 </li>

 <li>
     individual plugins for each external
 </li>
</ul>

<h3>The main loop and data structure</h3>
<p>The main data structure is <code>proteins</code> a dictionary where the keys are the seqid (sequence ID) of the protein, and the value is itself a dictionary of key-value pairs. 
</p>
<p>The program first reads a FASTA file to set up the dictionary, where at first only the 'sequence' field is created. Then the protein data structure is passed to each plugin, and progressively filled with properties generated by the plugin. 
</p>
<p>Each plugin interfaces with an external binary, whether through a local or web-based API. The fasta sequence is processed, and the output is read, parsed, and ultimately, new properties are used to fill <code>proteins</code>.
</p>

<h3>The protocol</h3>
<p>One of the abstractions made in <em>inmembrane</em> is to separate the main loop and the plugins so that <em>inmembrane</em> can accommodate the two primary protocols (one for Gram+ and one for Gram--). The choice of protocol is taken from the parameters file <code>inmembrane.config</code>. The relevant protocol is stored in a python module with the same name as the protocol in the <code>protocols</code> sub-directory.
</p>
<p>The responsiblity of the protocol is to check for the exact plugins required (not all are needed, as there are many different possibilities) and send the fasta sequences, as stored in the <code>proteins</code> dictionary, into the plugin to get the desire property from that plugin.
</p>
<p>Once all plugins have been successfully run, the plugin analyses the results of the external programs, and generates the final sub-cellular localisation and then, the 
</p>

<h3>Parameters - load from file/and or input default</h3>
<p>The approach in <em>inmembrane</em> is to collect all relevant parameters in one place. They are found in the <code>inmembrane.config</code> file that is conveniently, stored in the Python dictionary format. The dictionary is directly read in at the initialization of the program, and stored in a dictionary internally as <code>params</code>. The protocol and plugins all expect <code>params</code> as one of the key parameters in the main function.
</p>

<h3>Plugins</h3>
<p>External programs are organized around each plugin. The structure of plugin is straightforward: they are python modules stored in the <code>plugins</code> directory. The name of the module reflects the name of the program as stored in the <code>inmembrane.config</code>. 
</p>
<p>There is a function in the plugin that is called <code>annotate</code>. <code>annotate</code> always takes a <code>params</code> directory as the first parameter, and <code>protein</code> as the second parameter. There may be other parameters for the web-based version. All calls to the plugins are recognized by the module name, which can be called by <code>eval</code> within Python
</p>

<h3>Logging</h3>
<p>stderr, and or output
</p>

<h3>Ouptut CSV</h3>

<h3>chop_nterminal peptide</h3>

<h3>Temprorary output</h3>
<p>Use of dictionary important loss of confusion
</p>

<h3>Citations</h3>

<h3>Plugins</h3>
<p>wrap binaries in terms of plugins
</p>

          
        </div>
      </div>

      <hr>

      <div class="footer">
        <p>&copy; 2012, Andrew Perry and Bosco Ho</p>
      </div>

    </div> <!-- /container -->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/jquery.js"></script>
    <script src="js/bootstrap-transition.js"></script>
    <script src="js/bootstrap-alert.js"></script>
    <script src="js/bootstrap-modal.js"></script>
    <script src="js/bootstrap-dropdown.js"></script>
    <script src="js/bootstrap-scrollspy.js"></script>
    <script src="js/bootstrap-tab.js"></script>
    <script src="js/bootstrap-tooltip.js"></script>
    <script src="js/bootstrap-popover.js"></script>
    <script src="js/bootstrap-button.js"></script>
    <script src="js/bootstrap-collapse.js"></script>
    <script src="js/bootstrap-carousel.js"></script>
    <script src="js/bootstrap-typeahead.js"></script>

  </body>
</html>
